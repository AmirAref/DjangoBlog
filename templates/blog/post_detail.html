{% extends 'blog/base.html' %}
{% load comment_tags %}
{% load ratings %}

{% block titile %} - {{object.title}}{% endblock %}

{% block main %}
        <!-- Page Header-->
        <header class="masthead" style="background-image: url('{{object.thumbnail.url}}')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="post-heading">
                            <h1>{{object.title}}</h1>
                            {% if post.is_special %}
                            <span class="badge badge-danger fs-5">ویژه</span>
                            {% endif %}
                            <span class="meta mt-3">
                                {{object.author.get_full_name}}
                            </span>
                            <span class="meta mt-2">
                                {{object.jpublish}}
                            </span>
                        </div>
                        <div class="mt-3">{% ratings object %}</div>
                        <span class="mt-3 text-white">
                            بازدید ها : {{ object.hits.count }}
                        </span>
                    </div>
                </div>
            </div>
        </header>
        <!-- Post Content-->
        <article class="mb-4">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7 text-justify">
                        <!--check special posts-->
                        {% if object.is_special %}
                            <!--check user premissions-->
                            {% if user.is_authenticated and user.is_special_user or object.author == user or user.is_superuser %}
                                <p>{{object.description|safe|linebreaks}}</p>
                            {% else %}
                                <p>{{object.description|striptags|truncatewords:30}}</p>
                                <p class="alert alert-warning">این یک محتوای ویژه است و برای مشاهده آن باید <a href="#">اشتراک ویژه</a> تهیه کنید</p>
                            {% endif %}
                        {% else %}
                            <p>{{object.description|safe|linebreaks}}</p>
                        {% endif %}
                    </div>

                    {% render_comments object request %}
                    {% include_bootstrap %}
                </div>
            </div>
        </article>
{% endblock %}